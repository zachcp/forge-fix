{"id":"forge-fix-962","title":"Migrate colorama to recipe v1","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T11:22:27.403953-05:00","updated_at":"2025-11-29T11:23:00.541424-05:00","closed_at":"2025-11-29T11:23:00.541449-05:00","labels":["migration","noarch","python","success"],"comments":[{"id":1,"issue_id":"forge-fix-962","author":"zcpowers","text":"Package info:\n- Type: Pure Python (noarch)\n- Build system: hatchling\n- Version: 0.4.6\n- Feedstock: https://github.com/conda-forge/colorama-feedstock\n- Complexity: LOW - excellent template for simple Python packages","created_at":"2025-11-29T16:22:35Z"},{"id":2,"issue_id":"forge-fix-962","author":"zcpowers","text":"✓ Cloned feedstock to packages/colorama-feedstock\n✓ Created recipe-v1 branch\n✓ Created recipe.yaml with CEP 13/14 format:\n  - Added schema_version: 1\n  - Created context section\n  - Changed {{ }} to ${{ }}\n  - Converted tests to new format with python element\n  - Updated about section field names","created_at":"2025-11-29T16:22:41Z"},{"id":3,"issue_id":"forge-fix-962","author":"zcpowers","text":"✓ Build SUCCESSFUL with rattler-build\nPackage: colorama-0.4.6-pyh4616a5c_1.conda\nSize: 27.18 KiB\nBuild time: ~31 seconds\n\n✓ Tests PASSED:\n  - Python imports: colorama\n  - pip check: passed","created_at":"2025-11-29T16:22:45Z"},{"id":4,"issue_id":"forge-fix-962","author":"zcpowers","text":"Lessons learned:\n- Pure Python noarch packages are easiest to migrate\n- No issues with hatchling build backend in rattler-build\n- About section field renames needed:\n  * home → homepage\n  * doc_url → documentation\n  * dev_url → repository\n- New python test element works perfectly for imports + pip check\n- No platform-specific selectors needed for pure Python\n- Hardcoded python_min (3.9) from variant config replaced with literal","created_at":"2025-11-29T16:22:52Z"},{"id":6,"issue_id":"forge-fix-962","author":"zcpowers","text":"**Next Steps** (requires manual action):\n\n1. Fork colorama-feedstock to your GitHub:\n   Visit: https://github.com/conda-forge/colorama-feedstock\n   Click 'Fork' button\n\n2. Add your fork as submodule:\n   ```bash\n   cd packages\n   rm -rf colorama-feedstock\n   git submodule add https://github.com/zcpowers/colorama-feedstock.git colorama-feedstock\n   cd ..\n   git commit -m \"Add colorama-feedstock as submodule\"\n   ```\n\n3. Push the recipe-v1 branch to your fork:\n   ```bash\n   cd packages/colorama-feedstock\n   git remote add origin https://github.com/zcpowers/colorama-feedstock.git\n   git push origin recipe-v1\n   ```\n\n4. Create PR to upstream if ready","created_at":"2025-11-29T16:23:51Z"},{"id":7,"issue_id":"forge-fix-962","author":"zcpowers","text":"✅ COMPLETE - Pushed to fork\n\nBranch: https://github.com/zachcp/colorama-feedstock/tree/recipe-v1\n\nReady to create PR to upstream:\nhttps://github.com/conda-forge/colorama-feedstock/compare/main...zachcp:colorama-feedstock:recipe-v1","created_at":"2025-11-29T16:27:15Z"},{"id":9,"issue_id":"forge-fix-962","author":"zcpowers","text":"⚠️ Updated: Bumped build number to 2\n\nSince version (0.4.6) is unchanged but we're adding recipe.yaml format, build number must be incremented from 1 → 2.\n\nThis is a conda-forge requirement and ensures the new package build is distinguishable from the old one.\n\nUpdated branch pushed to fork.","created_at":"2025-11-29T16:31:36Z"},{"id":11,"issue_id":"forge-fix-962","author":"zcpowers","text":"✅ Updated: Removed meta.yaml\n\nrecipe.yaml is a COMPLETE REPLACEMENT for meta.yaml, not a supplement.\nBoth formats should not coexist in the feedstock.\n\nChanges pushed to fork.","created_at":"2025-11-29T16:34:25Z"}]}
{"id":"forge-fix-ecs","title":"Pattern: Build number must be bumped when adding recipe.yaml","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T11:31:47.437462-05:00","updated_at":"2025-11-29T11:31:59.032626-05:00","closed_at":"2025-11-29T11:31:59.032633-05:00","labels":["build-number","documented","important","pattern"],"comments":[{"id":10,"issue_id":"forge-fix-ecs","author":"zcpowers","text":"**Critical Pattern**: When adding recipe.yaml to existing feedstock, MUST bump build number.\n\n**Why:**\n- Adding recipe.yaml changes the feedstock but not the source package\n- conda-forge requires build number bump when version unchanged\n- Creates distinguishable package builds\n\n**Rule:**\n```yaml\n# meta.yaml has:\nbuild:\n  number: N\n\n# recipe.yaml must have:\nbuild:\n  number: N+1\n```\n\n**Example (colorama):**\n- meta.yaml: `number: 1`\n- recipe.yaml: `number: 2`\n- Result: `colorama-0.4.6-pyh4616a5c_2.conda`\n\n**Always check:**\n```bash\ngrep 'number:' recipe/meta.yaml  # Check current\n# Then increment in recipe.yaml\n```\n\n**Affects:** ALL package migrations\n\n**Documented in:** AGENTS.md Build Number Guidelines section","created_at":"2025-11-29T16:31:54Z"}]}
{"id":"forge-fix-kwd","title":"Setup: GitHub CLI for feedstock forking","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T11:28:23.50635-05:00","updated_at":"2025-11-29T11:28:32.874335-05:00","closed_at":"2025-11-29T11:28:32.87436-05:00","labels":["complete","documentation","setup"],"comments":[{"id":8,"issue_id":"forge-fix-kwd","author":"zcpowers","text":"GitHub CLI (gh) is required for automated feedstock forking.\n\n**Installation:**\n```bash\nbrew install gh\n```\n\n**Authentication:**\n```bash\ngh auth login\n# Follow prompts to authenticate with GitHub\n```\n\n**Usage for forking feedstocks:**\n```bash\ngh repo fork conda-forge/package-feedstock --clone=false\n# Returns: https://github.com/YOUR_USERNAME/package-feedstock\n```\n\nThis workflow is now documented in AGENTS.md and used for all package migrations.","created_at":"2025-11-29T16:28:29Z"}]}
{"id":"forge-fix-quw","title":"Solution: Pure Python noarch package template","description":"","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T11:23:07.337378-05:00","updated_at":"2025-11-29T11:23:07.337378-05:00","labels":["python","solution","template"],"comments":[{"id":5,"issue_id":"forge-fix-quw","author":"zcpowers","text":"Template for converting simple pure Python noarch packages from meta.yaml to recipe.yaml.\n\nBased on successful colorama migration (forge-fix-962).\n\n**Conversion steps:**\n1. Add `schema_version: 1`\n2. Create context section with name and version\n3. Change template syntax: `{{ }}` → `${{ }}`\n4. Convert test section to new tests format with python element\n5. Update about section field names:\n   - `home` → `homepage`\n   - `doc_url` → `documentation`\n   - `dev_url` → `repository`\n6. Replace variant config variables with literals (e.g., python_min → \u003e=3.9)\n\n**Verified packages:**\n- colorama v0.4.6\n\n**Applies to:**\n- Pure Python packages\n- noarch: python\n- No entry points\n- Simple dependency structure\n- hatchling, setuptools, or flit build backends","created_at":"2025-11-29T16:23:15Z"}]}
{"id":"forge-fix-rjk","title":"Pattern: Remove meta.yaml after recipe.yaml is complete","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T11:34:58.479043-05:00","updated_at":"2025-11-29T11:35:10.395919-05:00","closed_at":"2025-11-29T11:35:10.395947-05:00","labels":["critical","documented","important","pattern"],"comments":[{"id":12,"issue_id":"forge-fix-rjk","author":"zcpowers","text":"**Critical Pattern**: recipe.yaml is a COMPLETE REPLACEMENT for meta.yaml, not a supplement.\n\n**Rule:** After recipe.yaml is tested and working, REMOVE meta.yaml.\n\n**Why:**\n- Both formats should NOT coexist in the same feedstock\n- recipe.yaml replaces meta.yaml entirely (CEP 13/14)\n- Keeping both creates confusion and maintenance burden\n- conda-forge expects one format per feedstock\n\n**Workflow:**\n```bash\n# After testing recipe.yaml successfully\ncd packages/\u003cpackage\u003e-feedstock\ngit rm recipe/meta.yaml\ngit commit -m \"Remove meta.yaml (replaced by recipe.yaml)\"\n```\n\n**Commit message should mention:**\n- Convert to recipe.yaml\n- Remove meta.yaml (complete replacement)\n\n**Applied to:**\n- colorama (forge-fix-962)\n\n**Documented in:** AGENTS.md Build Number Guidelines section","created_at":"2025-11-29T16:35:06Z"}]}
